



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>keyboard - Musikla</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#keyboard" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Musikla" aria-label="Musikla" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Musikla
            </span>
            <span class="md-header-nav__topic">
              
                keyboard
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Musikla" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Musikla
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/notes-and-rests/" title="Notes & Rests" class="md-nav__link">
      Notes & Rests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/combinators/" title="Combinators" class="md-nav__link">
      Combinators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/chords/" title="Chords" class="md-nav__link">
      Chords
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/voices/" title="Voices" class="md-nav__link">
      Voices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sound-files/" title="Sound Files" class="md-nav__link">
      Sound Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/keyboards/" title="Keyboards" class="md-nav__link">
      Keyboards
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/grids/" title="Grids" class="md-nav__link">
      Grids
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/programming/" title="Programming" class="md-nav__link">
      Programming
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Cookbook
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Cookbook
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Keyboard
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Keyboard
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook/keyboards/custom-keyboard/" title="Custom Keyboards" class="md-nav__link">
      Custom Keyboards
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook/keyboards/paino-keyboard/" title="Piano Keyboards" class="md-nav__link">
      Piano Keyboards
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook/keyboards/midi-keyboard/" title="MIDI Keyboards" class="md-nav__link">
      MIDI Keyboards
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook/midi-output-waveform/" title="Recording to Traktion Waveform" class="md-nav__link">
      Recording to Traktion Waveform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook/multiple-outputs/" title="Multiple Outputs" class="md-nav__link">
      Multiple Outputs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../std/" title="std" class="md-nav__link">
      std
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        keyboard
      </label>
    
    <a href="./" title="keyboard" class="md-nav__link md-nav__link--active">
      keyboard
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#class-keyboard" class="md-nav__link">
    class Keyboard
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is_closed" class="md-nav__link">
    is_closed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keys" class="md-nav__link">
    keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual_lifetime" class="md-nav__link">
    manual_lifetime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#player" class="md-nav__link">
    player
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start_all" class="md-nav__link">
    start_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop_all" class="md-nav__link">
    stop_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start" class="md-nav__link">
    start()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open" class="md-nav__link">
    open()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone" class="md-nav__link">
    clone()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map_actions" class="md-nav__link">
    map_actions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter" class="md-nav__link">
    filter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with_grid" class="md-nav__link">
    with_grid()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    +=
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    -=
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    +
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    -
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-keyaction" class="md-nav__link">
    class KeyAction
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key" class="md-nav__link">
    key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expr" class="md-nav__link">
    expr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#args" class="md-nav__link">
    args
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hold" class="md-nav__link">
    hold
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toggle" class="md-nav__link">
    toggle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repeat" class="md-nav__link">
    repeat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extend" class="md-nav__link">
    extend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is_pressed" class="md-nav__link">
    is_pressed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is_playing" class="md-nav__link">
    is_playing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync" class="md-nav__link">
    sync
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play" class="md-nav__link">
    play()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop_1" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_press" class="md-nav__link">
    on_press()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_release" class="md-nav__link">
    on_release()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone_1" class="md-nav__link">
    clone()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-keyboardevent" class="md-nav__link">
    class KeyboardEvent
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary" class="md-nav__link">
    binary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_parameters" class="md-nav__link">
    get_parameters()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../music/" title="music" class="md-nav__link">
      music
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#class-keyboard" class="md-nav__link">
    class Keyboard
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is_closed" class="md-nav__link">
    is_closed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keys" class="md-nav__link">
    keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual_lifetime" class="md-nav__link">
    manual_lifetime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#player" class="md-nav__link">
    player
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start_all" class="md-nav__link">
    start_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop_all" class="md-nav__link">
    stop_all()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start" class="md-nav__link">
    start()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open" class="md-nav__link">
    open()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone" class="md-nav__link">
    clone()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map_actions" class="md-nav__link">
    map_actions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter" class="md-nav__link">
    filter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with_grid" class="md-nav__link">
    with_grid()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    +=
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    -=
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    +
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    -
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-keyaction" class="md-nav__link">
    class KeyAction
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key" class="md-nav__link">
    key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expr" class="md-nav__link">
    expr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#args" class="md-nav__link">
    args
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hold" class="md-nav__link">
    hold
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toggle" class="md-nav__link">
    toggle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repeat" class="md-nav__link">
    repeat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extend" class="md-nav__link">
    extend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is_pressed" class="md-nav__link">
    is_pressed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is_playing" class="md-nav__link">
    is_playing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync" class="md-nav__link">
    sync
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play" class="md-nav__link">
    play()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop_1" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_press" class="md-nav__link">
    on_press()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_release" class="md-nav__link">
    on_release()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone_1" class="md-nav__link">
    clone()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-keyboardevent" class="md-nav__link">
    class KeyboardEvent
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary" class="md-nav__link">
    binary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_parameters" class="md-nav__link">
    get_parameters()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="keyboard">keyboard</h1>
<p>Functions and classes related to the usage of keyboards. Keyboards declared through the syntax <code>@keyboard {}</code> are of the type <a href="#class-keyboard">Keyboard</a>.</p>
<blockquote>
<p><strong>NOTE</strong> This module is automatically imported for all scripts, and thus never needs to be manually imported.</p>
</blockquote>
<h2 id="class-keyboard">class Keyboard</h2>
<p>A keyboard can be thought of as a dictionary of keys and actions.</p>
<h3 id="is_closed">is_closed</h3>
<blockquote>
<p>is_closed : bool</p>
</blockquote>
<p>Returns <code>true</code> when the keyboard is closed (inactive) and <code>false</code> when it is open (active).</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="k">if</span><span class="s"> </span><span class="nv">$kb</span><span class="kp">::</span><span class="nf">is_closed</span><span class="s"> </span><span class="k">then</span><span class="s"> </span><span class="nv">$kb</span><span class="kp">::</span><span class="nf">open</span><span class="p">()</span><span class="s"> </span><span class="k">else</span><span class="s"> </span><span class="nv">$kb</span><span class="kp">::</span><span class="nf">close</span><span class="p">();</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<h3 id="keys">keys</h3>
<blockquote>
<p>keys : Dict[<a href="#class-keyboardevent">KeyboardEvent</a>, <a href="#class-keyaction">KeyAction</a>]</p>
</blockquote>
<p>Dictionary containing the keys and their associated actions. Can be treated just like any other dictionary in Python.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="k">for</span><span class="s"> </span><span class="nv">$key</span><span class="p">,</span><span class="s"> </span><span class="nv">$action</span><span class="s"> </span><span class="k">in</span><span class="s"> </span><span class="nv">$kb</span><span class="kp">::</span><span class="nf">keys</span><span class="kp">::</span><span class="nf">items</span><span class="p">()</span><span class="s"> </span><span class="p">{</span><span class="s"></span>
<span class="s">    </span><span class="nf">print</span><span class="p">(</span><span class="s"> </span><span class="nv">$key</span><span class="p">,</span><span class="s"> </span><span class="nv">$action</span><span class="s"> </span><span class="p">);</span><span class="s"></span>
<span class="p">};</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<h3 id="manual_lifetime">manual_lifetime</h3>
<blockquote>
<p>manual_lifetime : bool = false</p>
</blockquote>
<p>When <code>false</code>, the keyboard is automatically closed when a new one is created from it (this means, when it is cloned or mapped, for example). This prevents two identical keyboards from being active at the same time, and is the most common behavior. Switch to <code>true</code> and you'll need to close it manually whenever you want.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nv">$kb</span><span class="kp">::</span><span class="nf">manual_lifetime</span><span class="s"> </span><span class="kp">=</span><span class="s"> </span><span class="m">true</span><span class="p">;</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<h3 id="player">player</h3>
<blockquote>
<p><em>readonly</em> player : Player</p>
</blockquote>
<p>Returns an instance of the player associated to the keyboard.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c"># By default, all keyboards have the default player</span><span class="s"></span>
<span class="nv">$kb</span><span class="kp">::</span><span class="nf">player</span><span class="s"> </span><span class="kp">==</span><span class="s"> </span><span class="nv">$script</span><span class="kp">::</span><span class="nf">player</span><span class="p">;</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<h3 id="start_all">start_all()</h3>
<blockquote>
<p>start_all()</p>
</blockquote>
<p>Plays all the key actions in this keyboard.</p>
<h3 id="stop_all">stop_all()</h3>
<blockquote>
<p>stop_all()</p>
</blockquote>
<p>Stops all the (active) key actions in this keyboard.</p>
<h3 id="start">start()</h3>
<blockquote>
<p>start( key : <a href="#class-keyboardevent">KeyboardEvent</a> | str | int | Music )</p>
</blockquote>
<p>If there is an action associated with this key in this keyboard, then starts it.</p>
<h3 id="stop">stop()</h3>
<blockquote>
<p>stop( key : <a href="#class-keyboardevent">KeyboardEvent</a> | str | int | Music )</p>
</blockquote>
<p>If there is an action associated with this key in this keyboard, then stops it.</p>
<h3 id="close">close()</h3>
<blockquote>
<p>close() -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Close this keyboard (if it is open, otherwise do nothing). Returns self.</p>
<h3 id="open">open()</h3>
<blockquote>
<p>open() -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Open this keyboard (if it is closed, otherwise do nothing). Returns self.</p>
<h3 id="clone">clone()</h3>
<blockquote>
<p>clone( auto_close : bool = true ) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Creates a (deep) copy of the current keyboard, cloning it's actions as well.</p>
<p><strong>Note</strong> When auto_close is <code>true</code>, this functions respects the value of the <a href="#manual_lifetime">manual lifetime</a> attribute. When it is <code>false</code>, the original keyboard is kept always active.</p>
<h3 id="map">map()</h3>
<blockquote>
<p>map(mapper : (<a href="#class-keyboardevent">KeyboardEvent</a>, Any) -&gt; Any) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Returns a new keyboard. When a key is activated, the <code>mapper</code> function is called with two arguments: the key, and the value resulting from evaluatin the action's expression. Beware that this mapping is therefore lazy, which means, the mapping function is not called once at the beginning, but is rather called every time a key is activated.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nv">$times</span><span class="s"> </span><span class="kp">=</span><span class="s"> </span><span class="m">1</span><span class="p">;</span><span class="s"></span>

<span class="k">@keyboard</span><span class="s"> </span><span class="p">{</span><span class="s"></span>
<span class="s">    up</span><span class="gr">:</span><span class="s"> </span><span class="p">{</span><span class="s"> </span><span class="nv">$times</span><span class="s"> </span><span class="kp">+=</span><span class="s"> </span><span class="m">1</span><span class="s"> </span><span class="p">};</span><span class="s"> down</span><span class="gr">:</span><span class="s"> </span><span class="p">{</span><span class="s"> </span><span class="nv">$times</span><span class="s"> </span><span class="kp">-=</span><span class="s"> </span><span class="m">1</span><span class="s"> </span><span class="p">}</span><span class="s"></span>
<span class="p">};</span><span class="s"></span>

<span class="k">@keyboard</span><span class="s"> </span><span class="p">{</span><span class="s"></span>
<span class="s">    1</span><span class="gr">:</span><span class="s"> </span><span class="l">C</span><span class="p">;</span><span class="s">  2</span><span class="gr">:</span><span class="s"> </span><span class="l">D</span><span class="p">;</span><span class="s"> 3</span><span class="gr">:</span><span class="s"> </span><span class="l">E</span><span class="p">;</span><span class="s"></span>
<span class="p">}</span><span class="kp">::</span><span class="nf">map</span><span class="p">(</span><span class="s"> </span><span class="k">fun</span><span class="g"> </span><span class="p">(</span><span class="nv">$k</span><span class="p">,</span><span class="s"> </span><span class="nv">$m</span><span class="p">)</span><span class="s"> </span><span class="kp">=&gt;</span><span class="s"> </span><span class="nv">$m</span><span class="s"> </span><span class="kp">*</span><span class="s"> </span><span class="nv">$times</span><span class="s"> </span><span class="p">);</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<p>In this example, each note will be repeated <code>$times</code> If we change the value of <code>$times</code> up or down at some point, and then play the notes again, the repetition will reflect the new value, not the old one.</p>
<p><strong>Note</strong> This functions respects the value of the <a href="#manual_lifetime">manual lifetime</a> attribute.</p>
<h3 id="map_actions">map_actions()</h3>
<blockquote>
<p>map_actions(mapper : (<a href="#class-keyaction">KeyAction</a>) -&gt; <a href="#class-keyaction">KeyAction</a>) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Returns a new keyboard. The mapper function is called once, when creating the new keyboard.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="k">@keyboard</span><span class="s"> </span><span class="m">hold</span><span class="s"> </span><span class="p">{</span><span class="s"></span>
<span class="s">    1</span><span class="gr">:</span><span class="s"> </span><span class="l">C</span><span class="p">;</span><span class="s">  2</span><span class="gr">:</span><span class="s"> </span><span class="l">D</span><span class="p">;</span><span class="s"> 3</span><span class="gr">:</span><span class="s"> </span><span class="l">E</span><span class="p">;</span><span class="s"></span>
<span class="p">}</span><span class="kp">::</span><span class="nf">map_actions</span><span class="p">(</span><span class="s"> </span><span class="k">fun</span><span class="g"> </span><span class="p">(</span><span class="s"> </span><span class="nv">$act</span><span class="s"> </span><span class="p">)</span><span class="s"> </span><span class="kp">=&gt;</span><span class="s"> </span><span class="nv">$act</span><span class="kp">::</span><span class="nf">clone</span><span class="p">(</span><span class="s"> </span><span class="m">hold </span><span class="kp">=</span><span class="s"> </span><span class="m">false</span><span class="s"> </span><span class="p">)</span><span class="s"> </span><span class="p">);</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<p>This example removes the <code>hold</code> modifier from all key actions.</p>
<p><strong>Note</strong> This functions respects the value of the <a href="#manual_lifetime">manual lifetime</a> attribute.</p>
<h3 id="filter">filter()</h3>
<blockquote>
<p>filter(predicate : (<a href="#class-keyaction">KeyAction</a>) -&gt; bool) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Called once, keeps only the key actions for which the <code>predicate</code> function returns <code>true</code>.</p>
<p><strong>Note</strong> This functions respects the value of the <a href="#manual_lifetime">manual lifetime</a> attribute.</p>
<h3 id="with_grid">with_grid()</h3>
<blockquote>
<p>with_grid(grid : <a href="../music/#class-grid">Grid</a>, mode : str = 'start_end') -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>For every musical arrangement emitted by a key in this keyboard, aligns it with the given grid. Check out the Grid documentation for more information about the supported alignment modes.</p>
<p><strong>Note</strong> Since internally this function uses the <a href="#map">Keyboard#map</a> method, this functions respects the value of the <a href="#manual_lifetime">manual lifetime</a> attribute.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="k">fun</span><span class="g"> with_grid </span><span class="p">(</span><span class="s"> </span><span class="nv">$kb</span><span class="p">,</span><span class="s"> </span><span class="nv">$grid</span><span class="p">,</span><span class="s"> </span><span class="nv">$mode</span><span class="s"> </span><span class="p">)</span><span class="s"> </span><span class="kp">=&gt;</span><span class="s"></span>
<span class="s">    </span><span class="nv">$kb</span><span class="kp">::</span><span class="nf">map</span><span class="p">(</span><span class="s"> </span><span class="k">fun</span><span class="g"> </span><span class="p">(</span><span class="s"> </span><span class="nv">$k</span><span class="p">,</span><span class="s"> </span><span class="nv">$m</span><span class="s"> </span><span class="p">)</span><span class="s"> </span><span class="kp">=&gt;</span><span class="s"> </span><span class="nv">$grid</span><span class="kp">::</span><span class="nf">align</span><span class="p">(</span><span class="s"> </span><span class="nv">$m</span><span class="p">,</span><span class="s"> </span><span class="nv">$mode</span><span class="s"> </span><span class="p">)</span><span class="s"> </span><span class="p">);</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<h3 id="_1">+=</h3>
<blockquote>
<p>__iadd__( other : <a href="#class-keyboard">Keyboard</a> ) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Merges all the keys from <code>other</code> into the current keyboard, replacing any possible duplicates, and returns itself. If the <a href="#manual_lifetime">manual lifetime</a> attribute is set to <code>false</code> in the <code>other</code> keyboard, then that one is automatically closed.</p>
<h3 id="-">-=</h3>
<blockquote>
<p>__isub__( other : <a href="#class-keyboard">Keyboard</a> ) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Removes from <code>self</code> all keys found in <code>other</code>, and returns itself. Both keyboards remaing open.</p>
<h3 id="_2">+</h3>
<blockquote>
<p>__add__( other : <a href="#class-keyboard">Keyboard</a> ) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Returns a new keyboard with both keys from <code>self</code> and from <code>other</code>. Note that if either keyboard has the <a href="#manual_lifetime">manual lifetime</a> attribute is set to <code>false</code>, then they are automatically closed.</p>
<h3 id="-_1">-</h3>
<blockquote>
<p>__sub__( other : <a href="#class-keyboard">Keyboard</a> ) -&gt; <a href="#class-keyboard">Keyboard</a></p>
</blockquote>
<p>Returns a new keyboard with the keys from <code>self</code> that are not present in <code>other</code> (equivalent to the set difference operation). Note that if the <code>self</code> keyboard has the <a href="#manual_lifetime">manual lifetime</a> attribute is set to <code>false</code>, then it is automatically closed. The <code>other</code> keyboard always remains open.</p>
<h2 id="class-keyaction">class KeyAction</h2>
<h3 id="key">key</h3>
<blockquote>
<p>key : <a href="#class-keyboardevent">KeyboardEvent</a></p>
</blockquote>
<p>The key associated with this action</p>
<h3 id="expr">expr</h3>
<blockquote>
<p>expr : Node</p>
</blockquote>
<p>The AST Node for the expression. It is evaluated each time the key is activated.</p>
<h3 id="args">args</h3>
<blockquote>
<p>args : List[str]</p>
</blockquote>
<p>The list of arguments' names to extract from the keyboard event to expose to the expression when evaluating it.</p>
<h3 id="context">context</h3>
<blockquote>
<p>context : Context</p>
</blockquote>
<p>The base context with which the expression will be evaluated.</p>
<h3 id="hold">hold</h3>
<blockquote>
<p>hold : bool</p>
</blockquote>
<p>A flag that, when true, indicates that this action should start playing when the key is pressed, and stop when it is released. Cannot be used at the same time as the <a href="#toggle">toggle</a> flag.</p>
<h3 id="toggle">toggle</h3>
<blockquote>
<p>toggle : bool</p>
</blockquote>
<p>A flag that, when true, indicates that this action should start playing when the key is pressed, and stop when it is pressed again. Cannot be used at the same time as the <a href="#flag">hold</a> flag.</p>
<h3 id="repeat">repeat</h3>
<blockquote>
<p>repeat : bool</p>
</blockquote>
<p>A flag that, when true, indicates that if the music returned by the evaluated expression ends and the key is still active (has not stopped), then the expression should be evaluated again a played.</p>
<h3 id="extend">extend</h3>
<blockquote>
<p>extend : bool</p>
</blockquote>
<p>A flag that, when true, indicates that all <code>note_off</code> events are buffered (instead of being emitted) until the key is stopped. This means that instead of the notes played lasting whatever length is set in the code, they last as long as the key is active.</p>
<p>This flag is frequently used with either the <code>hold</code> or <code>toggle</code> flags, and means that the notes last until the key is released or pressed again, respectively.</p>
<h3 id="release">release</h3>
<blockquote>
<p>release : bool</p>
</blockquote>
<p>Ignores the <code>press</code> event, and only evaluates the expression when the release event is triggered. This flag is only valid for <a href="#binary">binary events</a>, for other events it is ignored.</p>
<h3 id="is_pressed">is_pressed</h3>
<blockquote>
<p><em>readonly</em> is_pressed : bool</p>
</blockquote>
<p>Read-only flag that indicates whether the key is pressed or not.</p>
<h3 id="is_playing">is_playing</h3>
<blockquote>
<p><em>readonly</em> is_playing : bool</p>
</blockquote>
<p>Returns whether the current key is still playing (this is different from being pressed, thanks to the different behaviors that can be set by the flags listed above).</p>
<h3 id="sync">sync</h3>
<blockquote>
<p>sync : bool</p>
</blockquote>
<p>Internal flag used for replaying keyboards synchronously instead of in realtime, as is usual.</p>
<h3 id="play">play()</h3>
<blockquote>
<p>play( player : PlayerLike, parameters : Dict[str, Any], cb : (InteractivePlayer) =&gt; void = none )</p>
</blockquote>
<h3 id="stop_1">stop()</h3>
<blockquote>
<p>stop( player : PlayerLike )</p>
</blockquote>
<h3 id="on_press">on_press()</h3>
<blockquote>
<p>on_press( player : PlayerLike, parameters : Dict[str, Any], cb : (InteractivePlayer) =&gt; void = none )</p>
</blockquote>
<h3 id="on_release">on_release()</h3>
<blockquote>
<p>stop( player : PlayerLike, cb : (InteractivePlayer) =&gt; void = none )</p>
</blockquote>
<h3 id="clone_1">clone()</h3>
<blockquote>
<p>clone( **kargs ) -&gt; <a href="#class-keyaction">KeyAction</a></p>
</blockquote>
<p>Creates a clone of the <code>KeyAction</code>. Allows passing any number of attributes as arguments to the function to be set in the cloned action.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nv">$action</span><span class="kp">::</span><span class="nf">hold</span><span class="s"> </span><span class="kp">=</span><span class="s"> </span><span class="m">true</span><span class="p">;</span><span class="s"></span>

<span class="nv">$cloned</span><span class="s"> </span><span class="kp">=</span><span class="s"> </span><span class="nv">$action</span><span class="kp">::</span><span class="nf">clone</span><span class="p">(</span><span class="s"> </span><span class="m">hold </span><span class="kp">=</span><span class="s"> </span><span class="m">false</span><span class="s"> </span><span class="p">);</span><span class="s"></span>

<span class="c"># Prints &quot;True False&quot;</span><span class="s"></span>
<span class="nf">print</span><span class="p">(</span><span class="s"> </span><span class="nv">$action</span><span class="kp">::</span><span class="nf">hold</span><span class="p">,</span><span class="s"> </span><span class="nv">$cloned</span><span class="kp">::</span><span class="nf">hold</span><span class="s"> </span><span class="p">);</span><span class="s"></span>
</code></pre></div>
</td></tr></table>

<h2 id="class-keyboardevent">class KeyboardEvent</h2>
<p>This is an <strong>abstract</strong> class that serves as the basis for the various kinds of keyboard events that are supported.</p>
<h3 id="binary">binary</h3>
<blockquote>
<p>binary : bool</p>
</blockquote>
<p>When an event type is binary, it has two stages: <code>press</code> and <code>release</code>. This applies to keyboard and piano events, for instance. On the other hand, an <em>unary</em> event only has the <code>press</code> stage. This applies to the movement of the mouse, or to a scroll wheel, for instance.</p>
<h3 id="get_parameters">get_parameters()</h3>
<blockquote>
<p>get_parameters() -&gt; Dict[str, Any]</p>
</blockquote>
<p>Should return a dictionary with all the parameters that the event contains.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../std/" title="std" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                std
              </span>
            </div>
          </a>
        
        
          <a href="../music/" title="music" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                music
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
    
  </body>
</html>